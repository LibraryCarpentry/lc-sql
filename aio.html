<!DOCTYPE html>
<!-- START: inst/pkgdown/templates/layout.html --><!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<title>Library Carpentry: SQL: All in One View</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" type="text/css" href="assets/styles.css">
<script src="assets/scripts.js" type="text/javascript"></script><!-- mathjax --><script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      config: ["MMLorHTML.js"],
      jax: ["input/TeX","input/MathML","output/HTML-CSS","output/NativeMML", "output/PreviewHTML"],
      extensions: ["tex2jax.js","mml2jax.js","MathMenu.js","MathZoom.js", "fast-preview.js", "AssistiveMML.js", "a11y/accessibility-menu.js"],
      TeX: {
        extensions: ["AMSmath.js","AMSsymbols.js","noErrors.js","noUndefined.js"]
      },
      tex2jax: {
        inlineMath: [['\\(', '\\)']],
        displayMath: [ ['$$','$$'], ['\\[', '\\]'] ],
        processEscapes: true
      }
    });
    </script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><!-- Responsive Favicon for The Carpentries --><link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
<link rel="manifest" href="site.webmanifest">
<link rel="mask-icon" href="safari-pinned-tab.svg" color="#5bbad5">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="theme-color" content="#ffffff">
</head>
<body>
    <header id="top" class="navbar navbar-expand-md navbar-light bg-white top-nav library"><a class="visually-hidden-focusable skip-link" href="#main-content">Skip to main content</a>
  <div class="container-fluid top-nav-container">
    <div class="col-md-6">
      <div class="large-logo">
        <img alt="Library Carpentry" src="assets/images/library-logo.svg">
</div>
    </div>
    <div class="selector-container">
      
      
      <div class="dropdown">
        <button class="btn btn-secondary dropdown-toggle bordered-button" type="button" id="dropdownMenu1" data-bs-toggle="dropdown" aria-expanded="false">
          <i aria-hidden="true" class="icon" data-feather="eye"></i> Learner View <i data-feather="chevron-down"></i>
        </button>
        <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">
<li><button class="dropdown-item" type="button" onclick="window.location.href='instructor/aio.html';">Instructor View</button></li>
        </ul>
</div>
    </div>
  </div>
  <hr></header><nav class="navbar navbar-expand-xl navbar-light bg-white bottom-nav library" aria-label="Main Navigation"><div class="container-fluid nav-container">
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
      <span class="menu-title">Menu</span>
    </button>
    <div class="nav-logo">
      <img class="small-logo" alt="Library Carpentry" src="assets/images/library-logo-sm.svg">
</div>
    <div class="lesson-title-md">
      Library Carpentry: SQL
    </div>
    <div class="search-icon-sm">
      <!-- TODO: do not show until we have search
      <i role="img" aria-label="search button" data-feather="search"></i>
      -->
    </div>
    <div class="desktop-nav">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0">
<li class="nav-item">
          <span class="lesson-title">
            Library Carpentry: SQL
          </span>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="key-points.html">Key Points</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="reference.html#glossary">Glossary</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="profiles.html">Learner Profiles</a>
        </li>
        <li class="nav-item dropdown">
          <button class="nav-link dropdown-toggle" id="navbarDropdown" data-bs-toggle="dropdown" aria-expanded="false">
            More <i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
<li><a class="dropdown-item" href="discuss.html">Discussion</a></li>
<li><a class="dropdown-item" href="reference.html">SQL Cheat Sheet</a></li>
          </ul>
</li>
      </ul>
</div>
    <form class="d-flex col-md-2 search-form">
      <fieldset disabled>
<input class="form-control me-2 searchbox" type="search" placeholder="Search" aria-label="Search"><button class="btn btn-outline-success tablet-search-button" type="submit">
          <i class="search-icon" data-feather="search" role="img" aria-label="search button"></i>
        </button>
      </fieldset>
</form>
  </div>
<!--/div.container-fluid -->
</nav><div class="col-md-12 mobile-title">
  Library Carpentry: SQL
</div>

<aside class="col-md-12 lesson-progress"><div style="width: %" class="percentage">
    %
  </div>
  <div class="progress library">
    <div class="progress-bar library" role="progressbar" style="width: %" aria-valuenow="" aria-label="Lesson Progress" aria-valuemin="0" aria-valuemax="100">
    </div>
  </div>
</aside><div class="container">
      <div class="row">
        <!-- START: inst/pkgdown/templates/navbar.html -->
<div id="sidebar-col" class="col-lg-4">
  <div id="sidebar" class="sidebar">
      <nav aria-labelledby="flush-headingEleven"><button role="button" aria-label="close menu" alt="close menu" aria-expanded="true" aria-controls="sidebar" class="collapse-toggle">
          <i class="search-icon" data-feather="x" role="img"></i>
        </button>
        <div class="sidebar-inner">
          <div class="row mobile-row">
            <div class="col">
              <div class="sidenav-view-selector">
                <div class="accordion accordion-flush" id="accordionFlush9">
                  <div class="accordion-item">
                    <h2 class="accordion-header" id="flush-headingNine">
                      <button class="accordion-button collapsed" id="instructor" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseNine" aria-expanded="false" aria-controls="flush-collapseNine">
                        <i id="eye" aria-hidden="true" class="icon" data-feather="eye"></i> Learner View
                      </button>
                    </h2>
                    <div id="flush-collapseNine" class="accordion-collapse collapse" aria-labelledby="flush-headingNine" data-bs-parent="#accordionFlush2">
                      <div class="accordion-body">
                        <a href="instructor/aio.html">Instructor View</a>
                      </div>
                    </div>
                  </div>
<!--/div.accordion-item-->
                </div>
<!--/div.accordion-flush-->
              </div>
<!--div.sidenav-view-selector -->
            </div>
<!--/div.col -->
      
            <hr>
</div>
<!--/div.mobile-row -->

          <div class="accordion accordion-flush" id="accordionFlush11">
            <div class="accordion-item">

              <button id="chapters" class="accordion-button show" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseEleven" aria-expanded="false" aria-controls="flush-collapseEleven">
                <h2 class="accordion-header chapters" id="flush-headingEleven">
                  EPISODES
                </h2>
              </button>
              <div id="flush-collapseEleven" class="accordion-collapse show collapse" aria-labelledby="flush-headingEleven" data-bs-parent="#accordionFlush11">

                <div class="accordion-body">
                  <div class="accordion accordion-flush" id="accordionFlush1">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading1">
        <a href="index.html">Summary and Setup</a>
    </div>
<!--/div.accordion-header-->
        
  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush2">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading2">
        <a href="01-introduction.html">1. Introduction to SQL</a>
    </div>
<!--/div.accordion-header-->
        
  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush3">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading3">
        <a href="02-selecting-sorting-data.html">2. Selecting and sorting data</a>
    </div>
<!--/div.accordion-header-->
        
  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush4">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading4">
        <a href="03-filtering.html">3. Filtering</a>
    </div>
<!--/div.accordion-header-->
        
  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush5">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading5">
        <a href="04-ordering-commenting.html">4. Ordering and commenting</a>
    </div>
<!--/div.accordion-header-->
        
  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush6">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading6">
        <a href="05-aggregating-calculating.html">5. Aggregating &amp; calculating values</a>
    </div>
<!--/div.accordion-header-->
        
  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush7">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading7">
        <a href="06-joins-aliases.html">6. Joins and aliases</a>
    </div>
<!--/div.accordion-header-->
        
  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush8">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading8">
        <a href="07-saving-queries.html">7. Saving queries</a>
    </div>
<!--/div.accordion-header-->
        
  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush9">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading9">
        <a href="08-database-design.html">8. Database design</a>
    </div>
<!--/div.accordion-header-->
        
  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush10">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading10">
        <a href="09-create.html">9. Creating tables and modifying data</a>
    </div>
<!--/div.accordion-header-->
        
  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush11">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading11">
        <a href="10-other-tools.html">10. Other database tools</a>
    </div>
<!--/div.accordion-header-->
        
  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush12">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading12">
        <a href="11-extra-challenges.html">11. Extra challenges (optional)</a>
    </div>
<!--/div.accordion-header-->
        
  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush13">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading13">
        <a href="Bonus_GoodStyle.html">12. Good Style</a>
    </div>
<!--/div.accordion-header-->
        
  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

                </div>
              </div>
            </div>

            <hr class="half-width">
<div class="accordion accordion-flush resources" id="accordionFlush12">
              <div class="accordion-item">
                <h2 class="accordion-header" id="flush-headingTwelve">
                  <button class="accordion-button collapsed" id="resources" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseTwelve" aria-expanded="false" aria-controls="flush-collapseTwelve">
                    RESOURCES
                  </button>
                </h2>
                <div id="flush-collapseTwelve" class="accordion-collapse collapse" aria-labelledby="flush-headingTwelve" data-bs-parent="#accordionFlush12">
                  <div class="accordion-body">
                    <ul>
<li>
                        <a href="key-points.html">Key Points</a>
                      </li>
                      <li>
                        <a href="reference.html#glossary">Glossary</a>
                      </li>
                      <li>
                        <a href="profiles.html">Learner Profiles</a>
                      </li>
                      <li><a href="discuss.html">Discussion</a></li>
<li><a href="reference.html">SQL Cheat Sheet</a></li>
                    </ul>
</div>
                </div>
              </div>
            </div>
            <hr class="half-width resources">
<a href="aio.html">See all in one page</a>
            

            <hr class="d-none d-sm-block d-md-none">
<div class="d-grid gap-1">
            
            </div>
          </div>
<!-- /div.accordion -->
        </div>
<!-- /div.sidebar-inner -->
      </nav>
</div>
<!-- /div.sidebar -->
  </div>
<!-- /div.sidebar-col -->
<!-- END:   inst/pkgdown/templates/navbar.html-->

        <!-- START: inst/pkgdown/templates/content-extra.html -->
  <div class="col-xl-8 col-lg-12 primary-content">
    <main id="main-content" class="main-content"><div class="container lesson-content">
        
        
<section id="aio-01-introduction"><p>Content from <a href="01-introduction.html">Introduction to SQL</a></p>
<hr>
<p> Last updated on 2023-05-02 | 
        
        <a href="https://github.com/librarycarpentry/lc-sql/edit/main/episodes/01-introduction.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right"> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>What is SQL?</li>
<li>Why is it significant?</li>
<li>What is the relationship between a relational database and SQL?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Define a relational database.</li>
<li>Explain what SQL is and why to use it.</li>
<li>Identify library and information skills that relate to using
SQL</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section id="what-is-sql"><h2 class="section-heading">What is SQL?<a class="anchor" aria-label="anchor" href="#what-is-sql"></a>
</h2>
<hr class="half-width">
<p><strong>S</strong>tructured <strong>Q</strong>uery
<strong>L</strong>anguage, or SQL (sometimes pronounced “sequel”), is a
powerful language used to interrogate and manipulate relational
databases. It is not a general programming language that you can use to
write an entire program. However, SQL queries can be called from
programming languages to let any program interact with databases. There
are several variants of SQL, but all support the same basic statements
that we will be covering today.</p>
</section><section id="relational-databases"><h2 class="section-heading">Relational databases<a class="anchor" aria-label="anchor" href="#relational-databases"></a>
</h2>
<hr class="half-width">
<p>Relational databases consist of one or more tables of data. These
tables have <em>fields</em> (columns) and <em>records</em> (rows). Every
field has a data <em>type</em>. Every value in the same field of each
record has the same <em>type</em>. These tables can be linked to each
other when a field in one table can be matched to a field in another
table. SQL <em>queries</em> are the commands that let you look up data
in a database or make calculations based on columns.</p>
</section><section id="why-use-sql"><h2 class="section-heading">Why use SQL?<a class="anchor" aria-label="anchor" href="#why-use-sql"></a>
</h2>
<hr class="half-width">
<p>SQL is well established and has been around since the 1970s. It is
still widely used in a variety of settings.</p>
<p>SQL lets you keep the data separate from the analysis. There is no
risk of accidentally changing data when you are analysing it. If the
data is updated, a saved query can be re-run to analyse the new
data.</p>
<p>SQL is optimised for handling large amounts of data. Data types help
quality control of entries - you will receive an error if you try to
enter a word into a field that should contain a number. Understanding
the nature of relational databases, and using SQL, will help you in
using databases in programming languages such as R or Python.</p>
<p>Many web applications (including WordPress and ecommerce sites like
Amazon) run on a SQL (relational) database. Understanding SQL is the
first step in eventually building custom web applications that can serve
data to users.</p>
</section><section id="why-are-people-working-in-library--and-information-related-roles-well-suited-to-sql"><h2 class="section-heading">Why are people working in library- and information-related roles
well suited to SQL?<a class="anchor" aria-label="anchor" href="#why-are-people-working-in-library--and-information-related-roles-well-suited-to-sql"></a>
</h2>
<hr class="half-width">
<p>Library work is about information management. As library workers, we
help sort and organise information, and we help people find information.
Most of us go through mediated queries to help people find the
information they need, e.g., we assist with or conduct a search via a
library catalogue. With SQL, you can directly construct your database
queries without the constraints (e.g., field name or search limitations)
imposed by a mediated search interface. Library workers are good at
searching information – constructing queries using SQL is a different
and more direct way of finding information.</p>
<div id="what-are-some-of-the-uses-for-sql-in-libraries" class="callout callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="what-are-some-of-the-uses-for-sql-in-libraries" class="callout-inner">
<h3 class="callout-title">What are some of the uses for SQL in
libraries?<a class="anchor" aria-label="anchor" href="#what-are-some-of-the-uses-for-sql-in-libraries"></a>
</h3>
<div class="callout-content">
<ul>
<li><p>You can use SQL to make macro or large scale changes to metadata
records in library databases, for instance, updating journal names so
that they are consistent or normalised throughout the database.</p></li>
<li><p>For situations where you have to interact with database
administrators in your library or wider organisation, you can learn the
fundamentals of SQL to become more fluent in the terminology.</p></li>
<li><p>Because SQL querying is similar to natural language queries, you
can use it to organise a variety of projects (e.g. programme evaluation)
and ask questions of the data before going on to use other data analysis
tools.</p></li>
<li><p>You can use SQL to query your library database and explore new
views that are not necessarily provided via library systems patron
facing interfaces.</p></li>
<li><p>SQL can be used to keep an inventory of items, for instance, for
a library’s makerspace, or it can be used to track licenses for
journals.</p></li>
<li><p>For projects involving migrating and cleaning data from one
system to another, SQL can be a handy tool.</p></li>
<li><p>With spreadsheets of data scattered throughout folders, SQL can
be a useful tool for connecting this data and bringing it together in a
database or central data warehouse where it can be accessible to
different roles in the library and queried in one place.</p></li>
<li><p>It can also help with initial exposure with interacting with a
system, in preparation for interacting with a application programming
interface or API later on.</p></li>
</ul>
<p>In addition, you can read about these two perspectives:</p>
<ul>
<li><p><a href="https://ruthtillman.com/an-introduction-to-sql-for-librarians/" class="external-link">An
Introduction to SQL for Librarians</a></p></li>
<li><p><a href="https://vickiboykis.com/2019/02/13/data-science-is-different-now/" class="external-link">Data
Science is Different Now: Learn SQL</a></p></li>
</ul>
</div>
</div>
</div>
</section><section id="database-management-systems"><h2 class="section-heading">Database Management Systems<a class="anchor" aria-label="anchor" href="#database-management-systems"></a>
</h2>
<hr class="half-width">
<p>There are a number of different database management systems for
working with relational data. We’re going to use SQLite today, but
basically everything we teach you will apply to the other database
systems as well (e.g., MySQL, PostgreSQL, MS Access, Filemaker Pro). The
only things that will differ are the details of exactly how to import
and export data and possibly some differences in datatype.</p>
</section><section id="introduction-to-db-browser-for-sqlite"><h2 class="section-heading">Introduction to DB Browser for SQLite<a class="anchor" aria-label="anchor" href="#introduction-to-db-browser-for-sqlite"></a>
</h2>
<hr class="half-width">
<p>Let’s all open the database we downloaded via the setup in DB Browser
for SQLite.</p>
<p>You can see the tables in the database by looking at the left hand
side of the screen under Tables.</p>
<p>To see the contents of a table, click on that table and then click on
the Browse Data tab above the table data.</p>
<p>If we want to write a query, we click on the Execute SQL tab.</p>
<p>There are two ways to add new data to a table without writing
SQL:</p>
<ol style="list-style-type: decimal">
<li>Enter data into a CSV file and append</li>
<li>Click the “Browse Data” tab, then click the “New Record”
button.</li>
</ol>
<p>The steps for adding data from a CSV file are:</p>
<ol style="list-style-type: decimal">
<li>Choose “File” &gt; “Import” &gt; “Table” from CSV file…</li>
<li>DB Browser for SQLite will prompt you if you want to add the data to
the existing table.</li>
</ol></section><section id="dataset-description"><h2 class="section-heading">Dataset Description<a class="anchor" aria-label="anchor" href="#dataset-description"></a>
</h2>
<hr class="half-width">
<p>The data we will be using consists of 5 csv files that contain tables
of article titles, journals, languages, licenses, and publishers. The
information in these tables are from a sample of 51 different journals
published during 2015.</p>
<p><strong>articles</strong></p>
<ul>
<li>Contains individual article Titles and the associated citations and
metadata</li>
<li>(16 fields, 1001 records)</li>
<li>Field names: <code>id</code>, <code>Title</code>,
<code>Authors</code>, <code>DOI</code>, <code>URL</code>,
<code>Subjects</code>, <code>ISSNs</code>, <code>Citation</code>,
<code>LanguageID</code>, <code>LicenseID</code>,
<code>Author_Count</code>, <code>First_Author</code>,
<code>Citation_Count</code>, <code>Day</code>, <code>Month</code>,
<code>Year</code>
</li>
</ul>
<p><strong>journals</strong></p>
<ul>
<li>Contains various journal Titles and associated metadata. The table
also associates Journal Titles with ISSN numbers that are then
referenced in the ‘articles’ table by the <code>ISSNs</code> field.</li>
<li>(5 fields, 51 records)</li>
<li>Field names: <code>id</code>,
<code>ISSN-L</code>,<code>ISSNs</code>, <code>PublisherID</code>,
<code>Journal_Title</code>
</li>
</ul>
<p><strong>languages</strong></p>
<ul>
<li>ID table which associates language codes with id numbers. These id
numbers are then referenced in the ‘articles’ table by the
<code>LanguageID</code> field.</li>
<li>(2 fields, 4 records)</li>
<li>Field names: <code>id</code>, <code>Language</code>
</li>
</ul>
<p><strong>licenses</strong></p>
<ul>
<li>ID table which associates License codes with id numbers. These id
numbers are then referenced in the ‘articles’ table by the
<code>LicenseID</code> field.</li>
<li>(2 fields, 4 records)</li>
<li>Field names: <code>id</code>, <code>Licence</code>
</li>
</ul>
<p><strong>publishers</strong></p>
<ul>
<li>ID table which associates Publisher names with id numbers. These id
numbers are then referenced in the ‘journals’ table by the
<code>PublisherID</code> field.</li>
<li>(2 fields, 6 records)</li>
<li>Field names: <code>id</code>, <code>Publisher</code>
</li>
</ul></section><section id="a-note-about-data-types"><h2 class="section-heading">A Note About Data Types<a class="anchor" aria-label="anchor" href="#a-note-about-data-types"></a>
</h2>
<hr class="half-width">
<p>The main data types that are used in doaj-article-sample database are
<code>INTEGER</code> and <code>TEXT</code> which define what value the
table column can hold.</p>
</section><section id="sql-data-type-quick-reference"><h2 class="section-heading">SQL Data Type Quick Reference<a class="anchor" aria-label="anchor" href="#sql-data-type-quick-reference"></a>
</h2>
<hr class="half-width">
<p>Different database software/platforms have different names and
sometimes different definitions of data types, so you’ll need to
understand the data types for any platform you are using. The following
table explains some of the common data types and how they are
represented in SQLite; <a href="https://www.sqlite.org/datatype3.html" class="external-link">more details available on
the SQLite website</a>.</p>
<table class="table">
<colgroup>
<col width="5%">
<col width="66%">
<col width="28%">
</colgroup>
<thead><tr class="header">
<th align="left">Data type</th>
<th align="left">Details</th>
<th align="left">Name in SQLite</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">boolean or binary</td>
<td align="left">this variable type is often used to represent variables
that can only have two values: yes or no, true or false.</td>
<td align="left">doesn’t exist - need to use integer data type and
values of 0 or 1.</td>
</tr>
<tr class="even">
<td align="left">integer</td>
<td align="left">sometimes called whole numbers or counting numbers. Can
be 1,2,3, etc., as well as 0 and negative whole numbers: -1,-2,-3,
etc.</td>
<td align="left">INTEGER</td>
</tr>
<tr class="odd">
<td align="left">float, real, or double</td>
<td align="left">a decimal number or a floating point value. The largest
possible size of the number may be specified.</td>
<td align="left">REAL</td>
</tr>
<tr class="even">
<td align="left">text or string</td>
<td align="left">and combination of numbers, letters, symbols. Platforms
may have different data types: one for variables with a set number of
characters - e.g., a zip code or postal code, and one for variables with
an open number of characters, e.g., an address or description
variable.</td>
<td align="left">TEXT</td>
</tr>
<tr class="odd">
<td align="left">date or datetime</td>
<td align="left">depending on the platform, may represent the date and
time or the number of days since a specified date. This field often has
a specified format, e.g., YYYY-MM-DD</td>
<td align="left">doesn’t exist - need to use built-in date and time
functions and store dates in real, integer, or text formats. See <a href="https://www.sqlite.org/datatype3.html#date_and_time_datatype" class="external-link">Section
2.2 of SQLite documentation</a> for more details.</td>
</tr>
<tr class="even">
<td align="left">blob</td>
<td align="left">a Binary Large OBject can store a large amount of data,
documents, audio or video files.</td>
<td align="left">BLOB</td>
</tr>
</tbody>
</table>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Keypoints<a class="anchor" aria-label="anchor" href="#keypoints1"></a>
</h3>
<div class="callout-content">
<ul>
<li>SQL is a powerful language used to interrogate and manipulate
relational databases.</li>
<li>People working in library- and information-related roles have skills
that allow them to use SQL to organize and access data.</li>
</ul>
</div>
</div>
</div>
</section></section><section id="aio-02-selecting-sorting-data"><p>Content from <a href="02-selecting-sorting-data.html">Selecting and sorting data</a></p>
<hr>
<p> Last updated on 2023-09-19 | 
        
        <a href="https://github.com/librarycarpentry/lc-sql/edit/main/episodes/02-selecting-sorting-data.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right"> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>What is a query?</li>
<li>How do you query databases using SQL?</li>
<li>How do you retrieve unique values in SQL?</li>
<li>How do you sort results in SQL?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Understand how SQL can be used to query databases</li>
<li>Understand how to build queries, using SQL keywords such as
<code>DISTINCT</code> and <code>ORDER BY</code>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section id="what-is-a-query"><h2 class="section-heading">What is a query?<a class="anchor" aria-label="anchor" href="#what-is-a-query"></a>
</h2>
<hr class="half-width">
<p>A query is a question or request for data. For example, “How many
journals does our library subscribe to?” When we query a database, we
can ask the same question using a common language called Structured
Query Language or SQL in what is called a statement. Some of the most
useful queries - the ones we are introducing in this first section - are
used to return results from a table that match specific criteria.</p>
</section><section id="writing-my-first-query"><h2 class="section-heading">Writing my first query<a class="anchor" aria-label="anchor" href="#writing-my-first-query"></a>
</h2>
<hr class="half-width">
<p>Let’s start by opening DB Browser for SQLite and the
doaj-article-sample database (see Setup). Choose
<code>Browse Data</code> and the <code>articles</code> table. The
articles table contains columns or fields such as <code>Title</code>,
<code>Authors</code>, <code>DOI</code>, <code>URL</code>, etc.</p>
<p>Let’s write a SQL query that selects only the <code>Title</code>
column from the <code>articles</code> table.</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">SQL<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode sql" tabindex="0"><code class="sourceCode sql"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> title</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> articles;</span></code></pre>
</div>
</section><section id="capitalization-and-good-style"><h2 class="section-heading">Capitalization and good style<a class="anchor" aria-label="anchor" href="#capitalization-and-good-style"></a>
</h2>
<hr class="half-width">
<p>In the first query above, we have capitalized the words
<code>SELECT</code> and <code>FROM</code> because they are SQL keywords.
Even though capitalization makes no difference to the SQL interpreter,
capitalization of these SQL terms helps for readability and is therefore
considered good style. As you write and expand your own queries, it
might be helpful to pick an option, such as <a href="https://en.wikipedia.org/wiki/Camel_case" class="external-link">CamelCase</a>, and use
that style when naming tables and columns. Some tables and columns
require capitalization and some do not. An occasional change of
capitalization for these table and column names may be needed.</p>
<p>Example:</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">SQL<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode sql" tabindex="0"><code class="sourceCode sql"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> Title, Authors, ISSNs, <span class="dt">Year</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> Articles;</span></code></pre>
</div>
<p>instead of</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">SQL<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode sql" tabindex="0"><code class="sourceCode sql"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> Title, authors, ISSNs, <span class="dt">Year</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> articles;</span></code></pre>
</div>
<p>If we want more information, we can add a new column to the list of
fields right after <code>SELECT</code>:</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">SQL<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode sql" tabindex="0"><code class="sourceCode sql"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> Title, Authors, ISSNs, <span class="dt">Year</span>, DOI</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> articles;</span></code></pre>
</div>
<p>Or we can select all of the columns in a table using the wildcard
<code>*</code>.</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">SQL<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode sql" tabindex="0"><code class="sourceCode sql"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="op">*</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> articles;</span></code></pre>
</div>
</section><section id="unique-values"><h2 class="section-heading">Unique values<a class="anchor" aria-label="anchor" href="#unique-values"></a>
</h2>
<hr class="half-width">
<p>There may be a situation when you need to retrieve unique records and
not multiple duplicate records. The SQL <code>DISTINCT</code> keyword is
used after <code>SELECT</code> to eliminate duplicate records and fetch
only unique records. Let’s return all of the unique <code>ISSNs</code>
in a SQL query.</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">SQL<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode sql" tabindex="0"><code class="sourceCode sql"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="kw">DISTINCT</span> ISSNs</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> articles;</span></code></pre>
</div>
<p>Note, some database systems require a semicolon <code>;</code> after
each SQL statement. If we select more than one column, then the distinct
pairs of values are returned.</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">SQL<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode sql" tabindex="0"><code class="sourceCode sql"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="kw">DISTINCT</span> ISSNs, <span class="dt">Day</span>, <span class="dt">Month</span>, <span class="dt">Year</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> articles;</span></code></pre>
</div>
</section><section id="sorting"><h2 class="section-heading">Sorting<a class="anchor" aria-label="anchor" href="#sorting"></a>
</h2>
<hr class="half-width">
<p>We can also sort the results of our queries by using the keyword
<code>ORDER BY</code>. Let’s create a query that sorts the articles
table in ascending order by ISSNs using the <code>ASC</code> keyword in
conjunction with <code>ORDER BY</code>.</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">SQL<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode sql" tabindex="0"><code class="sourceCode sql"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="op">*</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> articles</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="kw">ORDER</span> <span class="kw">BY</span> ISSNs <span class="kw">ASC</span>;</span></code></pre>
</div>
<p>The keyword <code>ASC</code> tells us to order it in ascending order.
Instead, we can use <code>DESC</code> to get the descending order
sorting by <code>First_Author</code>.</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">SQL<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode sql" tabindex="0"><code class="sourceCode sql"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="op">*</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> articles</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="kw">ORDER</span> <span class="kw">BY</span> First_Author <span class="kw">DESC</span>;</span></code></pre>
</div>
<p><code>ASC</code> is the default, so by omitting <code>ASC</code> or
<code>DESC</code>, SQLite will sort ascending (ASC).</p>
<p>We can also sort on several fields at once, in different directions.
For example, we can order by <code>ISSNs</code> descending and then
<code>First_Author</code> ascending in the same query.</p>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">SQL<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode sql" tabindex="0"><code class="sourceCode sql"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="op">*</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> articles</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="kw">ORDER</span> <span class="kw">BY</span> ISSNs <span class="kw">DESC</span>, First_Author <span class="kw">ASC</span>;</span></code></pre>
</div>
<div id="challenge" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="challenge" class="callout-inner">
<h3 class="callout-title">Challenge<a class="anchor" aria-label="anchor" href="#challenge"></a>
</h3>
<div class="callout-content">
<p>Write a query that returns <code>Title</code>,
<code>First_Author</code>, <code>ISSNs</code> and
<code>Citation_Count</code> from the articles table, ordered by the top
cited article and alphabetically by title.</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1">
  Show me the solution
  </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" data-bs-parent="#accordionSolution1" aria-labelledby="headingSolution1">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">SQL<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode sql" tabindex="0"><code class="sourceCode sql"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> Title, First_Author, ISSNs, Citation_Count</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> articles</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="kw">ORDER</span> <span class="kw">BY</span> Citation_Count <span class="kw">DESC</span>, Title <span class="kw">ASC</span>;</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Keypoints<a class="anchor" aria-label="anchor" href="#keypoints1"></a>
</h3>
<div class="callout-content">
<ul>
<li>SQL is ideal for querying databases</li>
<li>SQL queries have a basic query structure starting with
<code>SELECT</code> field FROM table with additional keywords and
criteria that can be used.</li>
</ul>
</div>
</div>
</div>
</section></section><section id="aio-03-filtering"><p>Content from <a href="03-filtering.html">Filtering</a></p>
<hr>
<p> Last updated on 2023-05-02 | 
        
        <a href="https://github.com/librarycarpentry/lc-sql/edit/main/episodes/03-filtering.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right"> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How can I filter data?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Write queries that <code>SELECT</code> data based on conditions,
such as <code>AND</code>, <code>OR</code>, and <code>NOT</code>.</li>
<li>Understand how to use the <code>WHERE</code> clause in a
statement.</li>
<li>Learn how to use comparison keywords such as <code>LIKE</code> in a
statement.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section id="filtering"><h2 class="section-heading">Filtering<a class="anchor" aria-label="anchor" href="#filtering"></a>
</h2>
<hr class="half-width">
<p>SQL is a powerful tool for filtering data in databases based on a set
of conditions. Let’s say we only want data for a specific ISSN, for
instance, for the <em>Acta Crystallographica</em> journal from the
<code>articles</code> table. The journal has an ISSN code
<code>2056-9890</code>. To filter by this ISSN code, we will use the
<code>WHERE</code> clause.</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">SQL<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode sql" tabindex="0"><code class="sourceCode sql"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="op">*</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> articles</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="kw">WHERE</span> ISSNs<span class="op">=</span><span class="st">'2056-9890'</span>;</span></code></pre>
</div>
<p>We can add additional conditions by using <code>AND</code>,
<code>OR</code>, and/or <code>NOT</code>. For example, suppose we want
the data on <em>Acta Crystallographica</em> published after October:</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">SQL<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode sql" tabindex="0"><code class="sourceCode sql"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="op">*</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> articles</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="kw">WHERE</span> (ISSNs<span class="op">=</span><span class="st">'2056-9890'</span>) <span class="kw">AND</span> (<span class="dt">Month</span> <span class="op">&gt;</span> <span class="dv">10</span>);</span></code></pre>
</div>
<p>Parentheses are used merely for readability in this case but can be
required by the SQL interpreter in order to disambiguate formulas.</p>
<p>If we want to get data for the <em>Humanities</em> and
<em>Religions</em> journals, which have ISSNs codes “2076-0787” and
“2077-1444”, we can combine the tests using OR:</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">SQL<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode sql" tabindex="0"><code class="sourceCode sql"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="op">*</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> articles</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="kw">WHERE</span> (issns <span class="op">=</span> <span class="st">'2076-0787'</span>) <span class="kw">OR</span> (issns <span class="op">=</span> <span class="st">'2077-1444'</span>);</span></code></pre>
</div>
<p>When you do not know the entire value you are searching for, you can
use comparison keywords such as <code>LIKE</code>, <code>IN</code>,
<code>BETWEEN...AND</code>, <code>IS NULL</code>. For instance, we can
use <code>LIKE</code> in combination with <code>WHERE</code> to search
for data that matches a pattern.</p>
<p>For example, using the <code>articles</code> table again, let’s
<code>SELECT</code> all of the data <code>WHERE</code> the
<code>Subject</code> contains “Crystal Structure”:</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">SQL<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode sql" tabindex="0"><code class="sourceCode sql"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="op">*</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> articles</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="kw">WHERE</span> Subjects <span class="kw">LIKE</span> <span class="st">'%Crystal Structure%'</span>;</span></code></pre>
</div>
<p>You may have noticed the wildcard character <code>%</code>. It is
used to match zero to many characters. So in the SQL statement above, it
will match zero or more characters before and after ‘Crystal
Structure’.</p>
<p>Let’s see what variations of the term we got. Notice uppercase and
lowercase, the addition of ‘s’ at the end of structures, etc.</p>
<p>To learn more about other comparison keywords you can use, see
Beginner SQL Tutorial on <a href="https://beginner-sql-tutorial.com/sql-like-in-operators.htm" class="external-link">SQL
Comparison Keywords</a>.</p>
<div id="challenge" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="challenge" class="callout-inner">
<h3 class="callout-title">Challenge<a class="anchor" aria-label="anchor" href="#challenge"></a>
</h3>
<div class="callout-content">
<p>Write a query that returns the <code>Title</code>,
<code>First_Author</code>, <code>Subjects</code>, <code>ISSNs</code>,
<code>Month</code> and <code>Year</code> for all papers where
<code>Subjects</code> contains “computer” and that have more than 8
citations.</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1">
  Show me the solution
  </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" data-bs-parent="#accordionSolution1" aria-labelledby="headingSolution1">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">SQL<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode sql" tabindex="0"><code class="sourceCode sql"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> Title, First_Author, Subjects, ISSNs, <span class="dt">Month</span>, <span class="dt">Year</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> articles</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="kw">WHERE</span> (Subjects <span class="kw">LIKE</span> <span class="st">'%computer%'</span>) <span class="kw">AND</span> (Citation_Count <span class="op">&gt;</span> <span class="dv">8</span>);</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<p>You can continue to add or chain conditions together and write more
advanced queries.</p>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Keypoints<a class="anchor" aria-label="anchor" href="#keypoints1"></a>
</h3>
<div class="callout-content">
<ul>
<li>Use <code>WHERE</code> to filter and retrieve data based on specific
conditions.</li>
<li>Use <code>AND, OR, and NOT</code> to add additional conditions.</li>
<li>Use the comparison keyword <code>LIKE</code> and wildcard characters
such as <code>%</code> to match patterns.</li>
</ul>
</div>
</div>
</div>
</section></section><section id="aio-04-ordering-commenting"><p>Content from <a href="04-ordering-commenting.html">Ordering and commenting</a></p>
<hr>
<p> Last updated on 2023-09-19 | 
        
        <a href="https://github.com/librarycarpentry/lc-sql/edit/main/episodes/04-ordering-commenting.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right"> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>What is the order of execution in SQL queries?</li>
<li>How can you organize and comment more complex SQL queries?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Understand how to build queries, and the order in which to build the
parts.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section id="order-of-execution"><h2 class="section-heading">Order of execution<a class="anchor" aria-label="anchor" href="#order-of-execution"></a>
</h2>
<hr class="half-width">
<p>Let’s say we had the following query:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">SQL<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode sql" tabindex="0"><code class="sourceCode sql"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> Title, Authors</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> articles</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="kw">WHERE</span> ISSNs <span class="op">=</span> <span class="st">'2067-2764|2247-6202'</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="kw">ORDER</span> <span class="kw">BY</span> First_Author <span class="kw">ASC</span>;</span></code></pre>
</div>
<p>What is interesting to note about this query is that we don’t
necessarily have to display the <code>First_Author</code> column in our
results in order to sort by it.</p>
<p>We can do this because sorting occurs earlier in the computational
pipeline than field selection.</p>
<div id="the-computer-is-basically-doing-this" class="callout callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="the-computer-is-basically-doing-this" class="callout-inner">
<h3 class="callout-title">The computer is basically doing this:<a class="anchor" aria-label="anchor" href="#the-computer-is-basically-doing-this"></a>
</h3>
<div class="callout-content">
<ol style="list-style-type: decimal">
<li>Filtering rows according to WHERE</li>
<li>Sorting results according to ORDER BY</li>
<li>Displaying requested columns or expressions.</li>
</ol>
</div>
</div>
</div>
<p>Clauses are written in a fixed order: <code>SELECT</code>,
<code>FROM</code>, <code>WHERE</code>, then <code>ORDER BY</code>. It is
possible to write a query as a single line, but for readability, we
recommend to put each clause on its own line.</p>
</section><section id="complex-queries-commenting"><h2 class="section-heading">Complex queries &amp; commenting<a class="anchor" aria-label="anchor" href="#complex-queries-commenting"></a>
</h2>
<hr class="half-width">
<p>The goal is to make a query easy to read and understand, even when
the logic becomes complex. This can be handled in two ways:</p>
<ol style="list-style-type: decimal">
<li>Rewriting the query so that the logic is easy to follow</li>
<li>Adding comments for context and clarity.</li>
</ol>
<p>Consider the following query:</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">SQL<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode sql" tabindex="0"><code class="sourceCode sql"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="op">*</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> articles</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="kw">WHERE</span> (ISSNs <span class="op">=</span> <span class="st">'2076-0787'</span>) <span class="kw">OR</span> (ISSNs <span class="op">=</span> <span class="st">'2077-1444'</span>) <span class="kw">OR</span> (ISSNs <span class="op">=</span> <span class="st">'2067-2764|2247-6202'</span>);</span></code></pre>
</div>
<p>SQL offers the flexibility of iteratively adding new conditions but
you may reach a point where the query is difficult to read and
inefficient. For instance, we can use <code>IN</code> to improve the
query and make it more readable:</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">SQL<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode sql" tabindex="0"><code class="sourceCode sql"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="op">*</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> articles</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="kw">WHERE</span> (ISSNs <span class="kw">IN</span> (<span class="st">'2076-0787'</span>, <span class="st">'2077-1444'</span>, <span class="st">'2067-2764|2247-6202'</span>));</span></code></pre>
</div>
<p>We started with something simple, then added more clauses one by one,
testing their effects as we went along. For complex queries, this is a
good strategy, to make sure you are getting what you want. Sometimes it
might help to take a subset of the data that you can easily see in a
temporary database to practice your queries on before working on a
larger or more complicated database.</p>
<p>When the queries become more complex, it can be useful to add
comments to express to yourself, or to others, what you are doing with
your query. Comments help explain the logic of a section and provide
context for anyone reading the query. It’s essentially a way of making
notes within your SQL. In SQL, comments begin using
<code class="language-plaintext highlighter-rouge">--</code> and end at
the end of the line. To mark a whole paragraph as a comment, you can
enclose it with the characters /* and */. For example, a commented
version of the above query can be written as:</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">SQL<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode sql" tabindex="0"><code class="sourceCode sql"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co">/*In this section, even though JOINS (see link below this code block)</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="co">are not introduced until Episode 6, we want to give an example how to</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="co">join multiple tables because they represent a good example of using</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="co">comments in SQL to explain more complex queries.*/</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a><span class="co">-- First we mention all the fields we want to display</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> articles.Title, articles.First_Author, journals.Journal_Title, publishers.Publisher</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a><span class="co">-- from the first table</span></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> articles</span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a><span class="co">-- and join it with the second table.</span></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a><span class="kw">JOIN</span> journals</span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a><span class="co">-- The related attributes are:</span></span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a><span class="kw">ON</span> articles.ISSNs <span class="op">=</span> journals.ISSNs</span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a><span class="co">-- We want to join a third table,</span></span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a><span class="kw">JOIN</span> publishers</span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a><span class="co">-- the related attributes are:</span></span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a><span class="kw">ON</span> publishers.<span class="kw">id</span> <span class="op">=</span> journals.PublisherId;</span></code></pre>
</div>
<p>To see the introduction and explanation of JOINS, please click to <a href="06-joins-aliases.html">Episode 6</a>. {: .sql}</p>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Keypoints<a class="anchor" aria-label="anchor" href="#keypoints1"></a>
</h3>
<div class="callout-content">
<ul>
<li>Queries often have the structure: SELECT data FROM table WHERE
certain criteria are present.</li>
</ul>
</div>
</div>
</div>
</section></section><section id="aio-05-aggregating-calculating"><p>Content from <a href="05-aggregating-calculating.html">Aggregating &amp; calculating values</a></p>
<hr>
<p> Last updated on 2023-05-02 | 
        
        <a href="https://github.com/librarycarpentry/lc-sql/edit/main/episodes/05-aggregating-calculating.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right"> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How can we aggregate values in SQL for reports?</li>
<li>Can SQL be used to make calculations?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Use SQL functions like <code>AVG</code> in combination with clauses
like <code>Group By</code> to aggregate values and return results for
reports.</li>
<li>Make calculations on fields using SQL.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section id="aggregation"><h2 class="section-heading">Aggregation<a class="anchor" aria-label="anchor" href="#aggregation"></a>
</h2>
<hr class="half-width">
<p>SQL contains functions which allow you to make calculations on data
in your database for reports. Some of the most common functions are
<code>MAX, MIN, AVG, COUNT, SUM</code>, and they will: <code>MAX</code>
(find the maximum value in a field), <code>MIN</code> (find the minimum
value in a field), <code>AVG</code> (find the average value of a field),
<code>COUNT</code> (count the number of values in a field and present
the total), and <code>SUM</code> (add up the values in a field and
present the sum).</p>
<p>Let’s say we wanted to get the average <code>Citation_Count</code>
for each of the <code>ISSNs</code>. We can use <code>AVG</code> and the
<code>GROUP BY</code> clause in a query:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">SQL<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode sql" tabindex="0"><code class="sourceCode sql"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> ISSNs, <span class="fu">AVG</span>(Citation_Count)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> articles</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="kw">GROUP</span> <span class="kw">BY</span> ISSNs;</span></code></pre>
</div>
<p><code>GROUP BY</code> is used by SQL to arrange identical data into
groups. In this case, we are arranging all the citation counts by ISSNs.
<code>AVG</code> acts on the <code>Citation_Count</code> in parentheses.
This process is also called <strong>aggregation</strong> which allows us
to combine results by grouping records based on value and calculating
combined values in groups.</p>
<p>As you can see, it is difficult to tell though what ISSN has the
highest average citation count and the least. We can improve upon the
query above by using <code>ORDER BY</code> and <code>DESC</code>.</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">SQL<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode sql" tabindex="0"><code class="sourceCode sql"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> ISSNs, <span class="fu">AVG</span>(Citation_Count)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> articles</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="kw">GROUP</span> <span class="kw">BY</span> ISSNs </span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="kw">ORDER</span> <span class="kw">BY</span> <span class="fu">AVG</span>(Citation_Count) <span class="kw">DESC</span>;</span></code></pre>
</div>
<div id="challenge" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="challenge" class="callout-inner">
<h3 class="callout-title">Challenge<a class="anchor" aria-label="anchor" href="#challenge"></a>
</h3>
<div class="callout-content">
<p>Write a query using an aggregate function that returns the number of
article titles per ISSNs, sorted by title count in descending order.
Which ISSN has the most titles? (Hint to choosing which aggregate
function to use - it is one of the common aggregate functions
<code>MAX, MIN, AVG, COUNT, SUM</code>.)</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1">
  Show me the solution
  </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" aria-labelledby="headingSolution1" data-bs-parent="#accordionSolution1">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">SQL<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode sql" tabindex="0"><code class="sourceCode sql"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> ISSNs, <span class="fu">COUNT</span>(Title)</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> articles</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="kw">GROUP</span> <span class="kw">BY</span> ISSNs</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="kw">ORDER</span> <span class="kw">BY</span> <span class="fu">COUNT</span>(Title) <span class="kw">DESC</span>;</span></code></pre>
</div>
</div>
</div>
</div>
</div>
</section><section id="the-having-keyword"><h2 class="section-heading">The <code>HAVING</code> keyword<a class="anchor" aria-label="anchor" href="#the-having-keyword"></a>
</h2>
<hr class="half-width">
<p>SQL offers a mechanism to filter the results based on aggregate
functions, through the <code>HAVING</code> keyword.</p>
<p>For example, we can adapt the last request we wrote to only return
information about journal <code>ISSNs</code> with 10 or more published
articles:</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">SQL<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode sql" tabindex="0"><code class="sourceCode sql"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> ISSNs, <span class="fu">COUNT</span>(<span class="op">*</span>)</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> articles</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="kw">GROUP</span> <span class="kw">BY</span> ISSNs</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="kw">HAVING</span> <span class="fu">count</span>(Title) <span class="op">&gt;=</span> <span class="dv">10</span>;</span></code></pre>
</div>
<p>The <code>HAVING</code> keyword works exactly like the
<code>WHERE</code> keyword, but uses aggregate functions instead of
database fields. When you want to filter based on an aggregation like
<code>MAX, MIN, AVG, COUNT, SUM</code>, use <code>HAVING</code>; to
filter based on the individual values in a database field, use
<code>WHERE</code>.</p>
<p>Note that <code>HAVING</code> comes <em>after</em>
<code>GROUP BY</code>. One way to think about this is: the data are
retrieved (<code>SELECT</code>), can be filtered (<code>WHERE</code>),
then joined in groups (<code>GROUP BY</code>); finally, we only select
some of these groups (<code>HAVING</code>).</p>
<div id="challenge-1" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="challenge-1" class="callout-inner">
<h3 class="callout-title">Challenge<a class="anchor" aria-label="anchor" href="#challenge-1"></a>
</h3>
<div class="callout-content">
<p>Write a query that returns, from the <code>articles</code> table, the
average <code>Citation_Count</code> for each journal ISSN but only for
the journals with 5 or more citations on average.</p>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2">
  Show me the solution
  </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" aria-labelledby="headingSolution2" data-bs-parent="#accordionSolution2">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">SQL<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode sql" tabindex="0"><code class="sourceCode sql"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> ISSNs, <span class="fu">AVG</span>(Citation_Count)</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> articles</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="kw">GROUP</span> <span class="kw">BY</span> ISSNs</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="kw">HAVING</span> <span class="fu">AVG</span>(Citation_Count)<span class="op">&gt;=</span><span class="dv">5</span>;</span></code></pre>
</div>
</div>
</div>
</div>
</div>
</section><section id="calculations"><h2 class="section-heading">Calculations<a class="anchor" aria-label="anchor" href="#calculations"></a>
</h2>
<hr class="half-width">
<p>In SQL, we can also perform calculations as we query the database.
Also known as computed columns, we can use expressions on a column or
multiple columns to get new values during our query. For example, what
if we wanted to calculate a new column called
<code>CoAuthor_Count</code>:</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">SQL<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode sql" tabindex="0"><code class="sourceCode sql"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> Title, ISSNs, Author_Count <span class="op">-</span><span class="dv">1</span> <span class="kw">as</span> CoAuthor_Count</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> articles</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="kw">ORDER</span> <span class="kw">BY</span> Author_Count <span class="op">-</span><span class="dv">1</span> <span class="kw">DESC</span>;</span></code></pre>
</div>
<p>In section <a href="06-joins-aliases.html">6. Joins and aliases</a>
we are going to learn more about the SQL keyword <code>AS</code> and how
to make use of aliases - in this example we simply used the calculation
and <code>AS</code> to represent that the new column is different from
the original SQL table data.</p>
<p>We can use any arithmetic operators (like <code>+</code>,
<code>-</code>, <code>*</code>, <code>/</code>, square root
<code>SQRT</code> or the modulo operator <code>%</code>) if we would
like.</p>
<p>If you would like to learn more about calculated values, the Software
Carpentry Databases and SQL lesson includes a useful episode on <a href="https://swcarpentry.github.io/sql-novice-survey/04-calc" class="external-link">Calculating
New Values</a>.</p>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Keypoints<a class="anchor" aria-label="anchor" href="#keypoints1"></a>
</h3>
<div class="callout-content">
<ul>
<li>SQL can be used for reporting purposes.</li>
<li>Queries can do arithmetic operations on field values.</li>
</ul>
</div>
</div>
</div>
</section></section><section id="aio-06-joins-aliases"><p>Content from <a href="06-joins-aliases.html">Joins and aliases</a></p>
<hr>
<p> Last updated on 2023-09-19 | 
        
        <a href="https://github.com/librarycarpentry/lc-sql/edit/main/episodes/06-joins-aliases.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right"> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How do I join two tables if they share a common point of
information?</li>
<li>How can I use aliases to improve my queries?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Understand how to link tables together via joins.</li>
<li>Understand when it is valuable to use aliases or shorthand.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section id="joins"><h2 class="section-heading">Joins<a class="anchor" aria-label="anchor" href="#joins"></a>
</h2>
<hr class="half-width">
<p>The SQL <code>JOIN</code> clause allows us to combine columns from
one or more tables in a database by using values common to each. It
follows the <code>FROM</code> clause in a SQL statement. We also need to
tell the computer which columns provide the link between the two tables
using the word <code>ON</code>.</p>
<p>Let’s start by joining data from the <code>articles</code> table with
the <code>journals</code> table. The <code>ISSNs</code> columns in both
these tables links them.</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">SQL<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode sql" tabindex="0"><code class="sourceCode sql"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="op">*</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> articles</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="kw">JOIN</span> journals</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="kw">ON</span> articles.ISSNs <span class="op">=</span> journals.ISSNs;</span></code></pre>
</div>
<p><code>ON</code> is similar to <code>WHERE</code>, it filters things
out according to a test condition. We use the <code>table.colname</code>
format to tell the SQL manager what column in which table we are
referring to.</p>
<p>We can represent <code>a LEFT</code> join using the following
diagram.</p>
<figure><img src="fig/left-join-articles-journals_40.png" alt="Join Diagram for Example" class="figure mx-auto d-block"></figure><p>Alternatively, we can use the word <code>USING</code>, as a
short-hand. In this case we are telling DB Browser that we want to
combine <code>articles</code> with <code>journals</code> and that the
common column is <code>ISSNs</code>.</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">SQL<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode sql" tabindex="0"><code class="sourceCode sql"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="op">*</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> articles</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="kw">JOIN</span> journals</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="kw">USING</span> (ISSNs);</span></code></pre>
</div>
<p>This figure shows the relations between the tables and helps to
visualise joining or linking the tables in the database: <img src="fig/articles-erd-v02.png" alt="Articles Database" class="figure"> We will cover
<a href="08-database-design.html">relational database design</a> in the
next episode. In addition to visual above, <em><a href="https://dataschool.com/how-to-teach-people-sql/sql-join-types-explained-visually/" class="external-link">SQL
Join Types Explained Visually</a></em> provides visual/animated examples
to help convey to learners what is happening in SQL
<code>JOIN</code>s.</p>
<p>When joining tables, you can specify the columns you want by using
<code>table.colname</code> instead of selecting all the columns using
<code>*</code>. For example:</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">SQL<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode sql" tabindex="0"><code class="sourceCode sql"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> articles.ISSNs, journals.Journal_Title, articles.Title, articles.First_Author, articles.<span class="dt">Month</span>, articles.<span class="dt">Year</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> articles</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="kw">JOIN</span> journals</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="kw">ON</span> articles.ISSNs <span class="op">=</span> journals.ISSNs;</span></code></pre>
</div>
<p>Joins can be combined with sorting, filtering, and aggregation. So,
if we wanted the average number of authors for articles on each journal,
we can use the following query:</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">SQL<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode sql" tabindex="0"><code class="sourceCode sql"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> articles.ISSNs, journals.Journal_Title, <span class="fu">ROUND</span>(<span class="fu">AVG</span>(articles.Author_Count), <span class="dv">2</span>)</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> articles</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="kw">JOIN</span> journals</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="kw">ON</span> articles.ISSNs <span class="op">=</span> journals.ISSNs</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a><span class="kw">GROUP</span> <span class="kw">BY</span> articles.ISSNs;</span></code></pre>
</div>
<p>The <code>ROUND</code> function allows us to round the
<code>Author_Count</code> number returned by the <code>AVG</code>
function by 2 decimal places.</p>
<div id="challenge" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="challenge" class="callout-inner">
<h3 class="callout-title">Challenge<a class="anchor" aria-label="anchor" href="#challenge"></a>
</h3>
<div class="callout-content">
<p>Write a query that <code>JOINS</code> the <code>articles</code> and
<code>journals</code> tables and that returns the
<code>Journal_Title</code>, total number of articles published and
average number of citations for every journal ISSN.</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1">
  Show me the solution
  </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" data-bs-parent="#accordionSolution1" aria-labelledby="headingSolution1">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">SQL<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode sql" tabindex="0"><code class="sourceCode sql"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> journals.Journal_Title, <span class="fu">count</span>(<span class="op">*</span>), <span class="fu">avg</span>(articles.Citation_Count)</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> articles</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="kw">JOIN</span> journals</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="kw">ON</span> articles.ISSNs <span class="op">=</span> journals.ISSNs</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="kw">GROUP</span> <span class="kw">BY</span> articles.ISSNs;</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<p>You can also join multiple tables. For example:</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">SQL<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode sql" tabindex="0"><code class="sourceCode sql"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> articles.Title, articles.First_Author, journals.Journal_Title, publishers.Publisher</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> articles</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="kw">JOIN</span> journals</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="kw">ON</span> articles.ISSNs <span class="op">=</span> journals.ISSNs</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a><span class="kw">JOIN</span> publishers</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a><span class="kw">ON</span> publishers.<span class="kw">id</span> <span class="op">=</span> journals.PublisherId;</span></code></pre>
</div>
<div id="challenge-1" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="challenge-1" class="callout-inner">
<h3 class="callout-title">Challenge<a class="anchor" aria-label="anchor" href="#challenge-1"></a>
</h3>
<div class="callout-content">
<p>Write a query that returns the <code>Journal_Title</code>,
<code>Publisher</code> name, and number of articles published, ordered
by number of articles in descending order.</p>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2">
  Show me the solution
  </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" data-bs-parent="#accordionSolution2" aria-labelledby="headingSolution2">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">SQL<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode sql" tabindex="0"><code class="sourceCode sql"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> journals.Journal_Title, publishers.Publisher, <span class="fu">COUNT</span>(<span class="op">*</span>)</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> articles</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="kw">JOIN</span> journals</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="kw">ON</span> articles.ISSNs <span class="op">=</span> journals.ISSNs</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a><span class="kw">JOIN</span> publishers</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a><span class="kw">ON</span> publishers.<span class="kw">id</span> <span class="op">=</span> journals.PublisherId</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a><span class="kw">GROUP</span> <span class="kw">BY</span> Journal_Title</span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a><span class="kw">ORDER</span> <span class="kw">BY</span> <span class="fu">COUNT</span>(<span class="op">*</span>) <span class="kw">DESC</span>;</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<p>There are different types of joins which you can learn more about at
<a href="https://www.geeksforgeeks.org/sql-join-set-1-inner-left-right-and-full-joins/" class="external-link">SQL
Joins Explained</a>.</p>
</section><section id="aliases"><h2 class="section-heading">Aliases<a class="anchor" aria-label="anchor" href="#aliases"></a>
</h2>
<hr class="half-width">
<p>As queries get more complex, names can get long and unwieldy. To help
make things clearer we can use aliases to assign new names to items in
the query.</p>
<p>We can alias both table names:</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">SQL<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode sql" tabindex="0"><code class="sourceCode sql"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> ar.Title, ar.First_Author, jo.Journal_Title</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> articles <span class="kw">AS</span> ar</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="kw">JOIN</span> journals  <span class="kw">AS</span> jo</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a><span class="kw">ON</span> ar.ISSNs <span class="op">=</span> jo.ISSNs;</span></code></pre>
</div>
<p>And column names:</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">SQL<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode sql" tabindex="0"><code class="sourceCode sql"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> ar.title <span class="kw">AS</span> title, ar.first_author <span class="kw">AS</span> author, jo.journal_title <span class="kw">AS</span> journal</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> articles <span class="kw">AS</span> ar</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="kw">JOIN</span> journals  <span class="kw">AS</span> jo</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="kw">ON</span> ar.issns <span class="op">=</span> jo.issns;</span></code></pre>
</div>
<p>The <code>AS</code> isn’t technically required, so you could do:</p>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">SQL<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode sql" tabindex="0"><code class="sourceCode sql"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> a.Title t</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> articles a;</span></code></pre>
</div>
<p>But using <code>AS</code> is much clearer so it is good style to
include it.</p>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Keypoints<a class="anchor" aria-label="anchor" href="#keypoints1"></a>
</h3>
<div class="callout-content">
<ul>
<li>Joining two tables in SQL is an good way to analyse datasets,
especially when both datasets provide partial answers to questions you
want to ask.</li>
<li>Creating aliases allows us to spend less time typing, and more time
querying!</li>
</ul>
</div>
</div>
</div>
</section></section><section id="aio-07-saving-queries"><p>Content from <a href="07-saving-queries.html">Saving queries</a></p>
<hr>
<p> Last updated on 2023-05-02 | 
        
        <a href="https://github.com/librarycarpentry/lc-sql/edit/main/episodes/07-saving-queries.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right"> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How can I save a query for future use?</li>
<li>How can I remove a saved query?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Learn how to save repeated queries as ‘Views’ and how to drop
them.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section id="saving-queries-for-future-use"><h2 class="section-heading">Saving queries for future use<a class="anchor" aria-label="anchor" href="#saving-queries-for-future-use"></a>
</h2>
<hr class="half-width">
<p>It is not uncommon to repeat the same operation more than once, for
example for monitoring or reporting purposes. SQL comes with a very
powerful mechanism to do this: views. Views are queries saved in the
database. You query it as a (virtual) table that is populated every time
you query it.</p>
<p>Creating a view from a query requires you to add
<code>CREATE VIEW viewname AS</code> before the query itself. For
example, if we want to save the query giving the number of journals in a
view, we can write:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">SQL<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode sql" tabindex="0"><code class="sourceCode sql"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">VIEW</span> journal_counts <span class="kw">AS</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> ISSNs, <span class="fu">COUNT</span>(<span class="op">*</span>)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> articles</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="kw">GROUP</span> <span class="kw">BY</span> ISSNs;</span></code></pre>
</div>
<p>Now, we will be able to access these results with a much shorter
notation:</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">SQL<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode sql" tabindex="0"><code class="sourceCode sql"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="op">*</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> journal_counts;</span></code></pre>
</div>
<p>Assuming we do not need this view anymore, we can remove it from the
database.</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">SQL<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode sql" tabindex="0"><code class="sourceCode sql"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="kw">DROP</span> <span class="kw">VIEW</span> journal_counts;</span></code></pre>
</div>
<p>In DBBrowser for SQLite, you can also create a view from any query by
omitting the <code>CREATE VIEW viewname AS</code> statement and instead,
clicking the small Save icon at the bottom of the Execute SQL tab and
then clicking <strong>Save as view</strong>. Whatever method you use to
create a view, it will appear in the list of views under the Database
Structure tab.</p>
<div id="challenge" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="challenge" class="callout-inner">
<h3 class="callout-title">Challenge<a class="anchor" aria-label="anchor" href="#challenge"></a>
</h3>
<div class="callout-content">
<p>Write a <code>CREATE VIEW</code> query that <code>JOINS</code> the
<code>articles</code> table with the <code>journals</code> table on
<code>ISSNs</code> and returns the <code>COUNT</code> of article records
grouped by the <code>Journal_Title</code> in <code>DESC</code>
order.</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1">
  Show me the solution
  </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" data-bs-parent="#accordionSolution1" aria-labelledby="headingSolution1">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">SQL<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode sql" tabindex="0"><code class="sourceCode sql"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">VIEW</span> journal_counts <span class="kw">AS</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> journals.Journal_Title, <span class="fu">COUNT</span>(<span class="op">*</span>)</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> articles</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="kw">JOIN</span> journals</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a><span class="kw">ON</span> articles.ISSNs <span class="op">=</span> journals.ISSNs</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a><span class="kw">GROUP</span> <span class="kw">BY</span> Journal_Title</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a><span class="kw">ORDER</span> <span class="kw">BY</span> <span class="fu">COUNT</span>(<span class="op">*</span>) <span class="kw">DESC</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Keypoints<a class="anchor" aria-label="anchor" href="#keypoints1"></a>
</h3>
<div class="callout-content">
<ul>
<li>Saving queries as ‘Views’ allows you to save time and avoid
repeating the same operation more than once.</li>
</ul>
</div>
</div>
</div>
</section></section><section id="aio-08-database-design"><p>Content from <a href="08-database-design.html">Database design</a></p>
<hr>
<p> Last updated on 2023-09-19 | 
        
        <a href="https://github.com/librarycarpentry/lc-sql/edit/main/episodes/08-database-design.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right"> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>What is database design?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Use Entity Relationship Diagrams to visualise and structure your
data.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section id="spreadsheets"><h2 class="section-heading">Spreadsheets<a class="anchor" aria-label="anchor" href="#spreadsheets"></a>
</h2>
<hr class="half-width">
<p>In libraries, spreadsheets are often created to keep lists of a
variety of things like an inventory of equipment, reference statistics,
or items to review for purchase (See <em><a href="01-introduction.html">What are some of the uses for SQL in
libraries?</a></em>). Spreadsheets, sometimes referred to as tabular
data or flat files, are an easy way to display data organized in columns
and rows. Column headers describe the data contained in corresponding
columns. Each row is a record (sometimes called an observation) with
data about it contained in separate column cells.</p>
<p>Spreadsheets can make data gathering easier but they can also lead to
messy data. Over time, if you gather enough data in spreadsheets, you
will likely end up with inconsistent data (i.e. misformatted, misspelled
data).</p>
<div id="identifying-inconsistencies-in-spreadsheet-data" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="identifying-inconsistencies-in-spreadsheet-data" class="callout-inner">
<h3 class="callout-title">Identifying inconsistencies in spreadsheet
data<a class="anchor" aria-label="anchor" href="#identifying-inconsistencies-in-spreadsheet-data"></a>
</h3>
<div class="callout-content">
<p>In the figure below, can you identify where inconsistencies in the
data have been introduced?</p>
<figure><img src="fig/doaj-spreadsheet.png" alt="OpenRefine DOAJ Sample Article Data" class="figure mx-auto d-block"></figure>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1">
  Answers
  </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" data-bs-parent="#accordionSolution1" aria-labelledby="headingSolution1">
<div class="accordion-body">
<ol style="list-style-type: decimal">
<li>The data in the “Language” column is formatted in two ways, as an
abbreviation and the full word;</li>
<li>The full names of authors are used, in first name to last name
order, with middle name abbreviated, separated by pipes;</li>
<li>Date format is MM/DD/YYYY and not the commonly used ISO 8601
format;</li>
<li>The “Subjects” column delimits data by pipes and the data is in a
variety of formats such as abbreviations, classifications, and sometimes
capitalised. <strong>Can you spot anything else?</strong>
</li>
</ol>
</div>
</div>
</div>
</div>
<p>Designing a relational database for your data can help reduce the
places where these errors can be introduced. You can also use SQL
queries to find these issues and address them across your entire
dataset. Before you can take advantage of all of these tools, you need
to design your database.</p>
</section><section id="database-design"><h2 class="section-heading">Database Design<a class="anchor" aria-label="anchor" href="#database-design"></a>
</h2>
<hr class="half-width">
<p>Database design involves a model or plan developed to determine how
the data is stored, organized and manipulated. The design addresses what
data will be stored, how they will be classified, and the
interrelationships between the data across different tables in the
database.</p>
</section><section id="terminology"><h2 class="section-heading">Terminology<a class="anchor" aria-label="anchor" href="#terminology"></a>
</h2>
<hr class="half-width">
<figure><img src="fig/field-record-value.png" alt="Fields, Records, Values" width="500" class="figure mx-auto d-block"></figure><p>In the <a href="01-introduction.html">Introduction to SQL</a> lesson,
we introduced the terms “fields”, “records”, and “values”. These terms
are commonly used in databases while the “columns”, “rows”, and “cells”
terms are more common in spreadsheets. Fields store a single kind of
information (text, integers, etc.) related to one topic (title, author,
year), while records are a set of fields containing specific values
related to one item in your database (a book, a person, a library).</p>
<p>To design a database, we must first decide what kinds of things we
want to represent as tables. A table is the physical manifestation of a
kind of “entity”. An entity is the conceptual representation of the
thing we want to store informtation about in the database, with each row
containing information about one entity. An entity has “attributes” that
describe it, represented as fields. For example, an article or a journal
is an entity. Attributes would be things like the article title, or
journal ISSN which would appear as fields.</p>
<p>To create relationships between tables later on, it is important to
designate one column as a primary key. A primary key, often designated
as PK, is one attribute of an entity that distinguishes it from the
other entities (or records) in your table. The primary key must be
unique for each row for this to work. A common way to create a primary
key in a table is to make an ‘id’ field that contains an auto-generated
integer that increases by 1 for each new record. This will ensure that
your primary key is unique.</p>
<p>It is useful to describe on an abstract level the entities we would
like to capture, along with how the different entities are related to
each other. We do this using and entity relationship diagram (ER diagram
or ERD).</p>
</section><section id="entity-relationship-diagram-er-diagram-or-erd"><h2 class="section-heading">Entity Relationship Diagram (ER Diagram or ERD)<a class="anchor" aria-label="anchor" href="#entity-relationship-diagram-er-diagram-or-erd"></a>
</h2>
<hr class="half-width">
<p>ERDs are helpful tools for visualising and structuring your data more
efficiently. They allow you to map relationships between concepts and
ultimately construct a relational database. The following is an ERD of
the database used in this lesson:</p>
<figure><img src="https://user-images.githubusercontent.com/30397506/115917162-6cc7ef00-a43b-11eb-97af-16fe50caa6a6.png" alt="Articles Database" class="figure mx-auto d-block"></figure><p><em>Or you can view the <a href="https://dbdiagram.io/d/5cc32b0cf7c5bb70c72fc530" class="external-link">dbdiagram.io
interactive version of the ERD</a></em></p>
<p>Relationships between entities and their attributes are represented
by lines linking them together. For example, the line linking journals
and publishers is interpreted as follows: The ‘journals’ entity is
related to the ‘publishers’ entity through the attributes ‘PublisherId’
and ‘id’ respectively.</p>
<p>Conceptually, we know that a journal has only one publisher but a
publisher can publish many journals. This is known as a one-to-many
relationship. In modeling relationships, we usually assign a unique
identifier to the ‘one’ side of the relationship and use that same
identifier to refer to that entity on the ‘many’ side. In ‘publishers’
table, the ‘id’ attribute is that unique identifier. We use that same
identifier in the ‘journals’ table to refer to an individual publisher.
That way, there is an unambiguous way for us to distinguish which
journals are associated with which publisher in a way that keeps the
integrity of the data (see the Normalization section below).</p>
</section><section id="more-terminology"><h2 class="section-heading">More Terminology<a class="anchor" aria-label="anchor" href="#more-terminology"></a>
</h2>
<hr class="half-width">
<p>The degree of relationship between entities is known as their
‘cardinality’. Using the journals-publishers example, the ‘publishers’
table contains a primary key (PK) called ‘id’. When the PK is used to
create a connection between the original table and a different table, it
is called a foreign key (FK) in the other table. To follow the example,
we see a field in the ‘journal’ table called PublisherID that contains
the values from the ‘id’ field in the ‘publisher’ table, connecting the
two tables.</p>
<p>There are 4 main types of relationships between tables:</p>
<ul>
<li>One to One - each item in the first table has exactly one match in
the second table.</li>
<li>One to Many - each item in the first table is related to many items
in the second table, sometimes represented as 1 to * or 1 to ∞</li>
<li>Many to One - many items in the first table is related to one item
in the second table.</li>
<li>Many to Many - many items in the first table are related to many
items in the second table.</li>
</ul>
<p>In our previous example of the ‘PublisherID’ field in the ‘journals’
table, the ‘publisher’ table has a one to many relationship with the
journals table. This is because one publisher may publish many journals,
so it will appear multiple times in that field.</p>
<p>A key attribute is often included when designing databases to
facilitate joins.</p>
</section><section id="normalisation"><h2 class="section-heading">Normalisation<a class="anchor" aria-label="anchor" href="#normalisation"></a>
</h2>
<hr class="half-width">
<p>ERDs are helpful in normalising your data which is a process that can
be used to create tables and establish relationships between those
tables with the goal of eliminating redundancy and inconsistencies in
the data.</p>
<p>In the example ERD above, creating a separate table for publishers
and linking to it from the journals table via PK and FK identifiers
allows us to normalise the data and avoid inconsistencies. If we used
one table, we could introduce publisher name errors such as misspellings
or alternate names as demonstrated below.</p>
<figure><img src="fig/normalisation.png" alt="Introducting inconsistencies and normalising data" class="figure mx-auto d-block"></figure><p>There are a number of normal forms in the normalisation process that
can help you reduce redundancy in database tables. <a href="https://www.studytonight.com/dbms/database-normalization.php" class="external-link">Study
Tonight</a> features tutorials where you can learn more about them.</p>
<div id="identifying-remaining-inconsistencies-in-the-erd" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="identifying-remaining-inconsistencies-in-the-erd" class="callout-inner">
<h3 class="callout-title">Identifying remaining inconsistencies in the
ERD<a class="anchor" aria-label="anchor" href="#identifying-remaining-inconsistencies-in-the-erd"></a>
</h3>
<div class="callout-content">
<p>Are there other tables and relationships you can create to further
normalise the data and avoid inconsistencies?</p>
<p>For this exercise, you can either use pencil/pen and paper to draw
new tables and relationships or use <a href="https://dbdiagram.io/d/5cc32b0cf7c5bb70c72fc530" class="external-link">dbdiagram.io</a>
to modify the ERD above.</p>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2">
  Answers
  </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" data-bs-parent="#accordionSolution2" aria-labelledby="headingSolution2">
<div class="accordion-body">
<ol style="list-style-type: decimal">
<li>An ‘authors’ table can be created with a many-to-many relationship
with the ‘articles’ table and an <a href="https://en.wikipedia.org/wiki/Associative_entity" class="external-link">associative
entity</a> or bridge table between them.</li>
<li>A ‘subjects’ table can be created with a many-to-many relationship
with the ‘articles’ table and a bridge table between them. <strong>Can
you spot anything else?</strong>
</li>
</ol>
</div>
</div>
</div>
</div>
<p>Additional database design tutorials to consult from Lucidchart:</p>
<ul>
<li><a href="https://www.lucidchart.com/pages/database-diagram/database-design" class="external-link">Database
Structure and Design Tutorial</a></li>
<li><a href="https://www.lucidchart.com/pages/er-diagrams" class="external-link">What is an
Entity Relationship Diagram</a></li>
</ul>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Keypoints<a class="anchor" aria-label="anchor" href="#keypoints1"></a>
</h3>
<div class="callout-content">
<ul>
<li>Database design is helpful for creating more efficient
databases.</li>
</ul>
</div>
</div>
</div>
</section></section><section id="aio-09-create"><p>Content from <a href="09-create.html">Creating tables and modifying data</a></p>
<hr>
<p> Last updated on 2023-09-19 | 
        
        <a href="https://github.com/librarycarpentry/lc-sql/edit/main/episodes/09-create.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right"> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How can I create, modify, and delete tables and data?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Write statements that create tables.</li>
<li>Write statements to insert, modify, and delete records.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>So far we have only looked at how to get information out of a
database, both because that is more frequent than adding information,
and because most other operations only make sense once queries are
understood. If we want to create and modify data, we need to know two
other sets of commands.</p>
<p>The first pair are <a href="https://www.sqlite.org/lang_createtable.html" class="external-link"><code>CREATE TABLE</code></a>
and <a href="https://www.sqlite.org/lang_droptable.html" class="external-link"><code>DROP TABLE</code></a>.
While they are written as two words, they are actually single commands.
The first one creates a new table; its arguments are the names and types
of the table’s columns. For example, the following statement creates the
table <code>journals</code>:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">SQL<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode sql" tabindex="0"><code class="sourceCode sql"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> journals(<span class="kw">id</span> text, ISSN<span class="op">-</span>L text, ISSNs text, PublisherId text, Journal_Title text);</span></code></pre>
</div>
<p>We can get rid of one of our tables using:</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">SQL<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode sql" tabindex="0"><code class="sourceCode sql"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="kw">DROP</span> <span class="kw">TABLE</span> journals;</span></code></pre>
</div>
<p>Be very careful when doing this: if you drop the wrong table, hope
that the person maintaining the database has a backup, but it’s better
not to have to rely on it.</p>
<p>We talked about data types earlier <a href="01-introduction.html#sql-data-type-quick-reference">in
Introduction to SQL: SQL Data Type Quick Reference</a>.</p>
<p>When we create a table, we can specify several kinds of constraints
on its columns. For example, a better definition for the
<code>journals</code> table would be:</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">SQL<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode sql" tabindex="0"><code class="sourceCode sql"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> <span class="ot">"journals"</span> (</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>	<span class="ot">"id"</span>	<span class="dt">INTEGER</span> <span class="kw">NOT</span> <span class="kw">NULL</span> <span class="kw">PRIMARY</span> <span class="kw">KEY</span> AUTOINCREMENT,</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>	<span class="ot">"ISSN-L"</span>	TEXT,</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>	<span class="ot">"ISSNs"</span>	TEXT,</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>	<span class="ot">"PublisherId"</span>	<span class="dt">INTEGER</span>,</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>	<span class="ot">"Journal_Title"</span>	TEXT,</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>	<span class="kw">CONSTRAINT</span> <span class="ot">"PublisherId"</span> <span class="kw">FOREIGN</span> <span class="kw">KEY</span>(<span class="ot">"PublisherId"</span>) <span class="kw">REFERENCES</span> <span class="ot">"publishers"</span>(<span class="ot">"id"</span>) </span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>);</span></code></pre>
</div>
<p>Once again, exactly what constraints are available and what they’re
called depends on which database manager we are using.</p>
<p>Once tables have been created, we can add, change, and remove records
using our other set of commands, <code>INSERT</code>,
<code>UPDATE</code>, and <code>DELETE</code>.</p>
<p>Here is an example of inserting rows into the <code>journals</code>
table:</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">SQL<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode sql" tabindex="0"><code class="sourceCode sql"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="kw">INSERT</span> <span class="kw">INTO</span> <span class="ot">"journals"</span> <span class="kw">VALUES</span> (<span class="dv">1</span>,<span class="st">'2077-0472'</span>,<span class="st">'2077-0472'</span>,<span class="dv">2</span>,<span class="st">'Agriculture'</span>);</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="kw">INSERT</span> <span class="kw">INTO</span> <span class="ot">"journals"</span> <span class="kw">VALUES</span> (<span class="dv">2</span>,<span class="st">'2073-4395'</span>,<span class="st">'2073-4395'</span>,<span class="dv">2</span>,<span class="st">'Agronomy'</span>);</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="kw">INSERT</span> <span class="kw">INTO</span> <span class="ot">"journals"</span> <span class="kw">VALUES</span> (<span class="dv">3</span>,<span class="st">'2076-2616'</span>,<span class="st">'2076-2616'</span>,<span class="dv">2</span>,<span class="st">'Animals'</span>);</span></code></pre>
</div>
<p>We can also insert values into one table directly from another:</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">SQL<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode sql" tabindex="0"><code class="sourceCode sql"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> <span class="ot">"myjournals"</span>(Journal_Title text, ISSNs text);</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="kw">INSERT</span> <span class="kw">INTO</span> <span class="ot">"myjournals"</span> <span class="kw">SELECT</span> Journal_Title, ISSNs <span class="kw">FROM</span> journals;</span></code></pre>
</div>
<p>Modifying existing records is done using the <code>UPDATE</code>
statement. To do this we tell the database which table we want to
update, what we want to change the values to for any or all of the
fields, and under what conditions we should update the values.</p>
<p>For example, if we made a typo when entering the ISSNs of the last
<code>INSERT</code> statement above, we can correct it with an
update:</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">SQL<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode sql" tabindex="0"><code class="sourceCode sql"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="kw">UPDATE</span> journals <span class="kw">SET</span> ISSN<span class="op">-</span>L <span class="op">=</span> <span class="dv">2076</span><span class="op">-</span><span class="dv">2615</span>, ISSNs <span class="op">=</span> <span class="dv">2076</span><span class="op">-</span><span class="dv">2615</span> <span class="kw">WHERE</span> <span class="kw">id</span> <span class="op">=</span> <span class="dv">3</span>;</span></code></pre>
</div>
<p>Be careful to not forget the <code>WHERE</code> clause or the update
statement will modify <em>all</em> of the records in the database.</p>
<p>Deleting records can be a bit trickier, because we have to ensure
that the database remains internally consistent. If all we care about is
a single table, we can use the <code>DELETE</code> command with a
<code>WHERE</code> clause that matches the records we want to discard.
We can remove the journal <code>Animals</code> from the
<code>journals</code> table like this:</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">SQL<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode sql" tabindex="0"><code class="sourceCode sql"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="kw">DELETE</span> <span class="kw">FROM</span> journals <span class="kw">WHERE</span> Journal_Title <span class="op">=</span> <span class="st">'Animals'</span>;</span></code></pre>
</div>
<p>But now the article
<code>Early Onset of Laying and Bumblefoot Favor Keel Bone Fractures</code>
from the table <code>articles</code> has no matching journal anymore.
That’s never supposed to happen: Our queries assume there will be a row
<code>ISSNs</code> in the table ‘journals’ matching every row
<code>ISSNs</code>in the table <code>articles</code>.</p>
<div id="exercise" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="exercise" class="callout-inner">
<h3 class="callout-title">Exercise<a class="anchor" aria-label="anchor" href="#exercise"></a>
</h3>
<div class="callout-content">
<p>Write an SQL statement to add the journal “New Journal of Physics”
(ISSNs &amp; ISSNs: 1367-2630; publisher: “Institute of Physics (IOP)”)
to the table <code>journals</code>. You need to add the publisher “IOP”
to the table <code>publishers</code> as well.</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1">
  Show me the solution
  </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" data-bs-parent="#accordionSolution1" aria-labelledby="headingSolution1">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">SQL<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode sql" tabindex="0"><code class="sourceCode sql"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="kw">INSERT</span> <span class="kw">INTO</span> <span class="ot">"publishers"</span> <span class="kw">VALUES</span> (<span class="dv">7</span>,<span class="st">'Institute of Physics (IOP)'</span>);</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="kw">INSERT</span> <span class="kw">INTO</span> <span class="ot">"journals"</span> <span class="kw">VALUES</span> (<span class="dv">52</span>,<span class="st">'1367-2630'</span>,<span class="st">'1367-2630'</span>,<span class="dv">7</span>,<span class="st">'New Journal of Physics'</span>);</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="backing-up-with-sql" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="backing-up-with-sql" class="callout-inner">
<h3 class="callout-title">Backing Up with SQL<a class="anchor" aria-label="anchor" href="#backing-up-with-sql"></a>
</h3>
<div class="callout-content">
<p>SQLite has several administrative commands that aren’t part of the
SQL standard. One of them is <code>.dump</code>, which prints the SQL
commands needed to re-create the database. Another is
<code>.read</code>, which reads a file created by <code>.dump</code> and
restores the database. A colleague of yours thinks that storing dump
files (which are text) in version control is a good way to track and
manage changes to the database. What are the pros and cons of this
approach? (Hint: records aren’t stored in any particular order.)</p>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2">
  Show me the solution
  </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" data-bs-parent="#accordionSolution2" aria-labelledby="headingSolution2">
<div class="accordion-body">
<div class="section level4">
<h4 id="advantages">Advantages<a class="anchor" aria-label="anchor" href="#advantages"></a>
</h4>
<ul>
<li>A version control system will be able to show differences between
versions of the dump file; something it can’t do for binary files like
databases</li>
<li>A VCS only saves changes between versions, rather than a complete
copy of each version (save disk space)</li>
<li>The version control log will explain the reason for the changes in
each version of the database</li>
</ul>
</div>
<div class="section level4">
<h4 id="disadvantages">Disadvantages<a class="anchor" aria-label="anchor" href="#disadvantages"></a>
</h4>
<ul>
<li>Artificial differences between commits because records don’t have a
fixed order</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>Adapted from the Software Carpentry Course “Databases and SQL”,
Chapter 9. ‘Creating and Modifying Data’. <a href="https://swcarpentry.github.io/sql-novice-survey/09-create" class="external-link uri">https://swcarpentry.github.io/sql-novice-survey/09-create</a></p>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Keypoints<a class="anchor" aria-label="anchor" href="#keypoints1"></a>
</h3>
<div class="callout-content">
<ul>
<li>Use CREATE and DROP to create and delete tables.</li>
<li>Use INSERT to add data.</li>
<li>Use UPDATE to modify existing data.</li>
<li>Use DELETE to remove data.</li>
<li>It is simpler and safer to modify data when every record has a
unique primary key.</li>
<li>Do not create dangling references by deleting records that other
records refer to.</li>
</ul>
</div>
</div>
</div></section><section id="aio-10-other-tools"><p>Content from <a href="10-other-tools.html">Other database tools</a></p>
<hr>
<p> Last updated on 2023-05-02 | 
        
        <a href="https://github.com/librarycarpentry/lc-sql/edit/main/episodes/10-other-tools.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right"> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>Are there other database tools that I can use besides DB Browser and
SqliteOnline?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Point to additional resources on other database tools.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section id="other-database-tools"><h2 class="section-heading">Other database tools<a class="anchor" aria-label="anchor" href="#other-database-tools"></a>
</h2>
<hr class="half-width">
<p>For this lesson, <a href="https://sqlitebrowser.org" class="external-link">DB Browser</a>,
a free open source database tool was used, but there are other tools
available, both proprietary and open. A helpful <a href="https://en.wikipedia.org/wiki/Comparison_of_database_tools" class="external-link">comparison
of database tools</a> is available via Wikipedia.</p>
<p><a href="https://sqliteonline.com/" class="external-link">SqliteOnline</a> is the free
online database tool offered as an alternative to DB Browser for this
lesson. In addition to SqliteOnline, there is <a href="https://data.world" class="external-link">data.world</a> which also allows you to work
online with SQL and (<a href="https://data.world/datasets/library" class="external-link">library</a>) datasets and
includes a <a href="https://docs.data.world/documentation/sql/concepts/basic/intro.html" class="external-link">tutorial</a>.
SQL use in <a href="https://www.google.com/sheets/about/" class="external-link">Google
Sheets</a>, a popular spreadsheet application, is even a possibility,
demonstrated via <a href="https://www.benlcollins.com/spreadsheets/google-sheets-query-sql/" class="external-link">Ben
Collin’s tutorial</a>. There is also a business standard software
package called, <a href="https://dev.mysql.com/downloads/" class="external-link">MySQL</a>,
which has a community edition that can be downloaded free.</p>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Keypoints<a class="anchor" aria-label="anchor" href="#keypoints1"></a>
</h3>
<div class="callout-content">
<ul>
<li>There are additional database tools beyond DB Browser and
SqliteOnline.</li>
</ul>
</div>
</div>
</div>
</section></section><section id="aio-11-extra-challenges"><p>Content from <a href="11-extra-challenges.html">Extra challenges (optional)</a></p>
<hr>
<p> Last updated on 2023-05-02 | 
        
        <a href="https://github.com/librarycarpentry/lc-sql/edit/main/episodes/11-extra-challenges.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right"> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>Are there extra challenges to practice translating plain English
queries to SQL queries?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Extra challenges to practice creating SQL queries.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section id="extra-challenges-optional"><h2 class="section-heading">Extra challenges (optional)<a class="anchor" aria-label="anchor" href="#extra-challenges-optional"></a>
</h2>
<hr class="half-width">
<p>SQL queries help us <em>ask</em> specific <em>questions</em> which we
want to answer about our data. The real skill with SQL is to know how to
translate our questions into a sensible SQL queries (and subsequently
visualise and interpret our results).</p>
<p>Have a look at the following questions; these questions are written
in plain English. Can you translate them to <em>SQL queries</em> and
give a suitable answer?</p>
<p>Also, if you would like to learn more SQL concepts and try additional
challenges, see the <a href="https://swcarpentry.github.io/sql-novice-survey/" class="external-link">Software
Carpentry Databases and SQL</a> lesson.</p>
<div id="challenge-1" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="challenge-1" class="callout-inner">
<h3 class="callout-title">Challenge 1<a class="anchor" aria-label="anchor" href="#challenge-1"></a>
</h3>
<div class="callout-content">
<p>How many <code>articles</code> are there from each
<code>First_author</code>? Can you make an alias for the number of
articles? Can you order the results by articles?</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1">
  Solution 1
  </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" aria-labelledby="headingSolution1" data-bs-parent="#accordionSolution1">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">SQL<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode sql" tabindex="0"><code class="sourceCode sql"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> First_Author, <span class="fu">COUNT</span>( <span class="op">*</span> ) <span class="kw">AS</span> n_articles</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> articles</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="kw">GROUP</span> <span class="kw">BY</span> First_Author</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="kw">ORDER</span> <span class="kw">BY</span> n_articles <span class="kw">DESC</span>;</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="challenge-2" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="challenge-2" class="callout-inner">
<h3 class="callout-title">Challenge 2<a class="anchor" aria-label="anchor" href="#challenge-2"></a>
</h3>
<div class="callout-content">
<p>How many papers have a single author? How many have 2 authors? How
many 3? etc?</p>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2">
  Solution 2
  </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" aria-labelledby="headingSolution2" data-bs-parent="#accordionSolution2">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">SQL<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode sql" tabindex="0"><code class="sourceCode sql"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> Author_Count, <span class="fu">COUNT</span>( <span class="op">*</span> )</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> articles</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="kw">GROUP</span> <span class="kw">BY</span> Author_Count;</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="challenge-3" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="challenge-3" class="callout-inner">
<h3 class="callout-title">Challenge 3<a class="anchor" aria-label="anchor" href="#challenge-3"></a>
</h3>
<div class="callout-content">
<p>How many articles are published for each <code>Language</code>?
Ignore articles where language is unknown.</p>
</div>
</div>
</div>
<div id="accordionSolution3" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution3" aria-expanded="false" aria-controls="collapseSolution3">
  <h4 class="accordion-header" id="headingSolution3">
  Solution 3
  </h4>
</button>
<div id="collapseSolution3" class="accordion-collapse collapse" aria-labelledby="headingSolution3" data-bs-parent="#accordionSolution3">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">SQL<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode sql" tabindex="0"><code class="sourceCode sql"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> Language, <span class="fu">COUNT</span>( <span class="op">*</span> )</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> articles</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="kw">JOIN</span> languages</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="kw">ON</span> articles.LanguageId<span class="op">=</span>languages.<span class="kw">id</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="kw">WHERE</span> Language <span class="op">!=</span> <span class="st">''</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a><span class="kw">GROUP</span> <span class="kw">BY</span> Language;</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="challenge-4" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="challenge-4" class="callout-inner">
<h3 class="callout-title">Challenge 4<a class="anchor" aria-label="anchor" href="#challenge-4"></a>
</h3>
<div class="callout-content">
<p>How many articles are published for each <code>Licence</code> type,
and what is the average number of citations for that
<code>Licence</code> type?</p>
</div>
</div>
</div>
<div id="accordionSolution4" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution4" aria-expanded="false" aria-controls="collapseSolution4">
  <h4 class="accordion-header" id="headingSolution4">
  Solution 4
  </h4>
</button>
<div id="collapseSolution4" class="accordion-collapse collapse" aria-labelledby="headingSolution4" data-bs-parent="#accordionSolution4">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">SQL<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode sql" tabindex="0"><code class="sourceCode sql"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> Licence, <span class="fu">AVG</span>( Citation_Count ), <span class="fu">COUNT</span>( <span class="op">*</span> )</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> articles</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="kw">JOIN</span> licences</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="kw">ON</span> articles.LicenceId<span class="op">=</span>licences.<span class="kw">id</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a><span class="kw">WHERE</span> Licence <span class="op">!=</span> <span class="st">''</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a><span class="kw">GROUP</span> <span class="kw">BY</span> Licence;</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="challenge-5" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="challenge-5" class="callout-inner">
<h3 class="callout-title">Challenge 5<a class="anchor" aria-label="anchor" href="#challenge-5"></a>
</h3>
<div class="callout-content">
<p>Write a query that returns
<code>Title, First_Author, Author_Count, Citation_Count, Month, Year, Journal_Title and Publisher</code>
for articles in the database.</p>
</div>
</div>
</div>
<div id="accordionSolution5" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution5" aria-expanded="false" aria-controls="collapseSolution5">
  <h4 class="accordion-header" id="headingSolution5">
  Solution 5
  </h4>
</button>
<div id="collapseSolution5" class="accordion-collapse collapse" aria-labelledby="headingSolution5" data-bs-parent="#accordionSolution5">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">SQL<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode sql" tabindex="0"><code class="sourceCode sql"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> Title, First_Author, Author_Count, Citation_Count, <span class="dt">Month</span>, <span class="dt">Year</span>, Journal_Title, Publisher</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> articles</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="kw">JOIN</span> journals</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="kw">ON</span> articles.issns<span class="op">=</span>journals.ISSNs</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="kw">JOIN</span> publishers</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a><span class="kw">ON</span> publishers.<span class="kw">id</span><span class="op">=</span>journals.PublisherId;</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Keypoints<a class="anchor" aria-label="anchor" href="#keypoints1"></a>
</h3>
<div class="callout-content">
<ul>
<li>It takes time and practice to learn how to translate plain English
queries into SQL queries.</li>
</ul>
</div>
</div>
</div>
</section></section><section id="aio-Bonus_GoodStyle"><p>Content from <a href="Bonus_GoodStyle.html">Good Style</a></p>
<hr>
<p> Last updated on 2023-05-02 | 
        
        <a href="https://github.com/librarycarpentry/lc-sql/edit/main/episodes/Bonus_GoodStyle.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right"> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>What is good SQL Style, and how can I abide by SQL conventions?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Understand the foundation for making clean, readable SQL
queries.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section id="an-introduction-to-good-style"><h2 class="section-heading">An Introduction to good style<a class="anchor" aria-label="anchor" href="#an-introduction-to-good-style"></a>
</h2>
<hr class="half-width">
<p>There are many ways to write an SQL queries, but some look better
than others. Abiding by good style guidelines will make your SQL queries
easier to read, especially if you are sharing them with others. These
are some quick tips for making your SQL look clean.</p>
</section><section id="pick-column-names-that-are-precise-and-short"><h2 class="section-heading">Pick column names that are precise and short<a class="anchor" aria-label="anchor" href="#pick-column-names-that-are-precise-and-short"></a>
</h2>
<hr class="half-width">
<p>When choosing column names, it’s important to remember that a large
part of what you type in your query will be composed of your column
names. Choosing a column name that is one or two words (without any
spaces!) will ensure that your queries are easier to type and read. If
you include spaces in your column names, you will get an error message
when you try to run your queries, so we would recommend using CamelCase,
or An_Underscore.</p>
</section><section id="capitalization-sometimes-matters"><h2 class="section-heading">Capitalization (sometimes) matters<a class="anchor" aria-label="anchor" href="#capitalization-sometimes-matters"></a>
</h2>
<hr class="half-width">
<p>In section two, we talked about SQL keywords/commands being
case-insensitive (“We have capitalised the words SELECT and FROM because
they are SQL keywords. This makes no difference to the SQL interpreter
as it is case-insensitive, but it helps for readability and is therefore
considered good style.”). But did you know that in some SQL programs,
depending on the settings, table and column names are case sensitive? If
your query isn’t working, check the capitalization.</p>
</section><section id="readability"><h2 class="section-heading">Readability<a class="anchor" aria-label="anchor" href="#readability"></a>
</h2>
<hr class="half-width">
<p>As you may have noticed, we are able to write our query on one line,
or on many. The general consensus with SQL is that if you can break it
into components on multiple lines, it becomes easier to read. Using
multiple lines and indenting, you can turn something that looks like
this:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">SQL<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode sql" tabindex="0"><code class="sourceCode sql"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> articles.Title, articles.First_Author, journals.Journal_Title, publishers.Publisher <span class="kw">FROM</span> articles <span class="kw">JOIN</span> journals <span class="kw">ON</span> articles.ISSNs <span class="op">=</span> journals.ISSNs <span class="kw">JOIN</span> publishers <span class="kw">ON</span> publishers.<span class="kw">id</span> <span class="op">=</span> journals.PublisherId;</span></code></pre>
</div>
<p>Into something that looks like this:</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">SQL<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode sql" tabindex="0"><code class="sourceCode sql"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> articles.Title, articles.First_Author, journals.Journal_Title, publishers.Publisher</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> articles</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="kw">JOIN</span> journals</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="kw">ON</span> articles.ISSNs <span class="op">=</span> journals.ISSNs</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="kw">JOIN</span> publishers</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="kw">ON</span> publishers.<span class="kw">id</span> <span class="op">=</span> journals.PublisherId;</span></code></pre>
</div>
<p>In some programs (such as MySQL), there will be tools that can
automatically “beautify” your code for better readability.</p>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Keypoints<a class="anchor" aria-label="anchor" href="#keypoints1"></a>
</h3>
<div class="callout-content">
<ul>
<li>There are many ways to write an SQL queries, but some look better
than others.</li>
</ul>
</div>
</div>
</div>
</section></section>
</div>
    </main>
</div>
<!-- END  : inst/pkgdown/templates/content-extra.html -->

      </div>
<!--/div.row-->
      		<footer class="row footer mx-md-3"><hr>
<div class="col-md-6">
				<p>This lesson is subject to the <a href="CODE_OF_CONDUCT.html">Code of Conduct</a></p>
        <p>
        
        <a href="https://github.com/librarycarpentry/lc-sql/edit/main/README.md" class="external-link">Edit on GitHub</a>
        
	
        | <a href="https://github.com/librarycarpentry/lc-sql/blob/main/CONTRIBUTING.md" class="external-link">Contributing</a> 
        | <a href="https://github.com/librarycarpentry/lc-sql/" class="external-link">Source</a></p>
				<p><a href="https://github.com/librarycarpentry/lc-sql/blob/main/CITATION" class="external-link">Cite</a> | <a href="mailto:team@carpentries.org">Contact</a> | <a href="https://carpentries.org/about/" class="external-link">About</a></p>
			</div>
			<div class="col-md-6">
        
        <p>Materials licensed under <a href="LICENSE.html">CC-BY 4.0</a> by the authors</p>
        
        <p><a href="https://creativecommons.org/licenses/by-sa/4.0/" class="external-link">Template licensed under CC-BY 4.0</a> by <a href="https://carpentries.org" class="external-link">The Carpentries</a></p>
        <p>Built with <a href="https://github.com/carpentries/sandpaper/tree/0.14.0" class="external-link">sandpaper (0.14.0)</a>,
        <a href="https://github.com/carpentries/pegboard/tree/0.7.1" class="external-link">pegboard (0.7.1)</a>,
      and <a href="https://github.com/carpentries/varnish/tree/0.3.1" class="external-link">varnish (0.3.1)</a>.</p>
			</div>
		</footer>
</div> <!-- / div.container -->
	<div id="to-top">
		<a href="#top">
			<i class="search-icon" data-feather="arrow-up" role="img" aria-label="Back to top"></i><br><span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top
		</a>
	</div>
  <script type="application/ld+json">
    {
  "@context": "https://schema.org",
  "@type": "TrainingMaterial",
  "@id": "https://librarycarpentry.github.io/lc-sql/aio.html",
  "dct:conformsTo": "https://bioschemas.org/profiles/TrainingMaterial/1.0-RELEASE",
  "description": "A Carpentries Lesson teaching foundational data and coding skills to researchers worldwide",
  "keywords": "software, data, lesson, The Carpentries",
  "name": "All in One View",
  "creativeWorkStatus": "active",
  "url": "https://librarycarpentry.github.io/lc-sql/aio.html",
  "identifier": "https://librarycarpentry.github.io/lc-sql/aio.html",
  "dateCreated": "2018-04-12",
  "dateModified": "2023-10-17",
  "datePublished": "2023-10-17"
}

  </script><script>
		feather.replace();
	</script><!-- Matomo
    2022-11-07: we have gotten a notification that we have an overage for our
    tracking and I'm pretty sure this has to do with Workbench usage.
    Considering that I am not _currently_ using this tracking because I do not
    yet know how to access the data, I am turning this off for now.
  <script>
    var _paq = window._paq = window._paq || [];
    /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
    _paq.push(["setDocumentTitle", document.domain + "/" + document.title]);
    _paq.push(["setDomains", ["*.preview.carpentries.org","*.datacarpentry.github.io","*.datacarpentry.org","*.librarycarpentry.github.io","*.librarycarpentry.org","*.swcarpentry.github.io", "*.carpentries.github.io"]]);
    _paq.push(["setDoNotTrack", true]);
    _paq.push(["disableCookies"]);
    _paq.push(['trackPageView']);
    _paq.push(['enableLinkTracking']);
    (function() {
          var u="https://carpentries.matomo.cloud/";
          _paq.push(['setTrackerUrl', u+'matomo.php']);
          _paq.push(['setSiteId', '1']);
          var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
          g.async=true; g.src='https://cdn.matomo.cloud/carpentries.matomo.cloud/matomo.js'; s.parentNode.insertBefore(g,s);
        })();
  </script>
  End Matomo Code -->
</body>
</html><!-- END:   inst/pkgdown/templates/layout.html-->

